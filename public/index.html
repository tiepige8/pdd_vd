<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>拼多多视频上传助手 · 流程化</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f5f9f7;
        --card: #ffffff;
        --text: #1f2937;
        --muted: #6b7280;
        --primary: #2bb673;
        --primary-soft: #e7f6ef;
        --accent: #5ec2f2;
        --accent-soft: #e9f6fd;
        --border: #e5edf3;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        background: linear-gradient(180deg, #f7fbf9 0%, #f4f7fb 100%);
        color: var(--text);
        font-family: 'Avenir Next', 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        padding: 28px 20px 60px;
      }
      h1 {
        font-size: 26px;
        margin: 0 0 6px;
      }
      .sub {
        color: var(--muted);
        margin-bottom: 18px;
      }
      .layout {
        display: grid;
        grid-template-columns: 1.7fr 1fr;
        gap: 18px;
        align-items: start;
      }
      .page-block {
        margin-bottom: 18px;
      }
      .row-grid {
        display: grid;
        gap: 18px;
        align-items: start;
      }
      .row-grid.three {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .row-grid.two {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      @media (max-width: 1100px) {
        .row-grid.three {
          grid-template-columns: 1fr;
        }
        .row-grid.two {
          grid-template-columns: 1fr;
        }
      }
      .card.fixed {
        height: 420px;
        display: flex;
        flex-direction: column;
      }
      .card.fixed .fixed-body {
        overflow: hidden;
        flex: 1;
      }
      .card.fixed.collapsed .fixed-body {
        max-height: 320px;
      }
      .card.fixed:not(.collapsed) {
        height: auto;
      }
      .card.fixed:not(.collapsed) .fixed-body {
        max-height: none;
      }
      .toggle-collapse {
        margin-top: 10px;
        align-self: flex-start;
      }
      .primary-panel {
        border: 2px solid rgba(46, 187, 139, 0.35);
        background: linear-gradient(180deg, #ffffff 0%, #f3fbf7 100%);
      }
      .note {
        margin: 0 0 12px;
      }
      @media (max-width: 960px) {
        .layout {
          grid-template-columns: 1fr;
        }
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 18px;
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);
      }
      .flow {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 18px;
        align-items: start;
      }
      @media (max-width: 960px) {
        .flow {
          grid-template-columns: 1fr;
        }
      }
      h2 {
        font-size: 20px;
        margin: 0;
      }
      .step-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        flex-wrap: wrap;
      }
      .step-title {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .step-title p {
        margin: 4px 0 0;
      }
      .step-num {
        width: 34px;
        height: 34px;
        border-radius: 12px;
        background: var(--primary-soft);
        color: var(--primary);
        font-weight: 700;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .log-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
      }
      @media (max-width: 900px) {
        .log-grid {
          grid-template-columns: 1fr;
        }
      }
      .panel {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px;
        background: #fafcfe;
      }
      .log-tools {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        margin: 12px 0 10px;
      }
      .tab-group {
        display: inline-flex;
        align-items: center;
        background: #f3f6fb;
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 4px;
        gap: 4px;
      }
      .tab {
        border: none;
        background: transparent;
        color: var(--muted);
        border-radius: 999px;
        padding: 6px 12px;
        font-size: 12px;
        cursor: pointer;
      }
      .tab.active {
        background: #ffffff;
        color: var(--text);
        box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);
      }
      label {
        display: block;
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 6px;
      }
      input {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: #f8fafc;
        color: var(--text);
        outline: none;
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      select {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: #f8fafc;
        color: var(--text);
        outline: none;
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      textarea {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: #f8fafc;
        color: var(--text);
        outline: none;
        transition: border-color 0.2s, box-shadow 0.2s;
        min-height: 110px;
        resize: vertical;
        font-family: inherit;
      }
      input:focus {
        border-color: rgba(46, 187, 139, 0.5);
        box-shadow: 0 0 0 3px rgba(46, 187, 139, 0.12);
      }
      select:focus {
        border-color: rgba(46, 187, 139, 0.5);
        box-shadow: 0 0 0 3px rgba(46, 187, 139, 0.12);
      }
      textarea:focus {
        border-color: rgba(46, 187, 139, 0.5);
        box-shadow: 0 0 0 3px rgba(46, 187, 139, 0.12);
      }
      .row {
        margin-bottom: 14px;
      }
      .btn {
        border: 1px solid transparent;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 600;
        cursor: pointer;
        background: #fff;
        color: var(--text);
        transition: transform 0.1s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      }
      .btn:hover {
        transform: translateY(-1px);
      }
      .btn.primary {
        background: var(--primary);
        color: #fff;
      }
      .btn.big {
        padding: 12px 22px;
        font-size: 16px;
        border-radius: 12px;
      }
      @media (max-width: 900px) {
        .btn.big {
          width: 100%;
        }
      }
      .stat-grid {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .shop-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .shop-chip {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #f8fafc;
        font-size: 12px;
      }
      .btn.secondary {
        background: var(--accent);
        color: #fff;
      }
      .btn.ghost {
        background: #fff;
        border-color: var(--border);
        color: var(--text);
      }
      .feedback {
        margin-top: 8px;
        font-size: 13px;
        color: var(--muted);
        min-height: 18px;
      }
      .feedback.error {
        color: #b42318;
      }
      .feedback.success {
        color: #1c7f56;
      }
      .btn.small {
        padding: 6px 10px;
        font-size: 12px;
      }
      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .muted {
        color: var(--muted);
        font-size: 13px;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--primary-soft);
        gap: 6px;
        font-size: 12px;
        margin-bottom: 10px;
      }
      .auth-url {
        word-break: break-all;
        font-size: 13px;
        background: #f3f6fb;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
      }
      pre {
        margin: 0;
        padding: 12px;
        background: #f3f6fb;
        border-radius: 10px;
        border: 1px solid var(--border);
        font-size: 12px;
        overflow: auto;
      }
      .tag {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 999px;
        background: var(--accent-soft);
        color: #1f4a58;
        font-size: 12px;
        margin-bottom: 6px;
      }
      ul {
        padding-left: 18px;
        color: var(--muted);
        line-height: 1.6;
      }
      a {
        color: #2b90c4;
        text-decoration: none;
      }
      .token-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 8px;
      }
      .stat {
        background: #f7fafc;
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 10px;
      }
      .stat .label {
        color: var(--muted);
        font-size: 12px;
      }
      .stat .value {
        font-weight: 700;
        margin-top: 4px;
      }
      .log-area {
        background: #f7fafc;
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 12px;
        min-height: 160px;
        max-height: 300px;
        overflow-y: auto;
        font-size: 12px;
        white-space: pre-line;
      }
      .shop-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 8px 4px;
        border-bottom: 1px solid var(--border);
      }
      .shop-row:last-child {
        border-bottom: none;
      }
      .shop-meta {
        display: flex;
        flex-direction: column;
        gap: 2px;
        font-size: 12px;
        color: var(--muted);
      }
      .shop-actions {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }
      .log-item {
        margin-bottom: 6px;
        color: var(--text);
      }
      .log-item .ts {
        color: var(--muted);
        margin-right: 6px;
      }
      .table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
        margin-top: 8px;
      }
      .table th,
      .table td {
        border: 1px solid var(--border);
        padding: 6px;
        color: var(--text);
      }
      .table-wrapper {
        max-height: 360px;
        overflow: auto;
      }
      .table th {
        background: #f4f7fb;
        text-align: left;
      }
      .badge {
        display: inline-block;
        padding: 2px 6px;
        border-radius: 999px;
        font-size: 11px;
      }
      .badge.success {
        background: #e7f6ef;
        color: #1c7f56;
      }
      .badge.processing {
        background: #e9f6fd;
        color: #256b86;
      }
      .badge.failed {
        background: #fdecec;
        color: #b42318;
      }
      .status {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
      }
      .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: #94a3b8;
      }
      .dot.ok {
        background: var(--primary);
      }
      .dot.bad {
        background: #f87171;
      }
      .hero-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }
      .hero-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .section-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-weight: 600;
        margin-bottom: 8px;
      }
      .block-title {
        font-weight: 600;
        margin: 10px 0 6px;
      }
      details.collapse summary {
        cursor: pointer;
        font-weight: 600;
        list-style: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      details.collapse summary::-webkit-details-marker {
        display: none;
      }
      details.collapse summary::after {
        content: "展开";
        font-size: 12px;
        color: var(--muted);
      }
      details.collapse[open] summary::after {
        content: "收起";
      }
    </style>
  </head>
  <body>
    <header>
      <h1>拼多多视频上传助手</h1>
      <p class="sub">按流程执行：下载 → 上传 → 查看日志 → 其他配置。</p>
    </header>

    

    <section class="page-block">
      <div class="card primary-panel">
        <div class="hero-top">
          <div>
            <h2>自动化上传入口</h2>
            <p class="muted">点击后一键下载，下载完成自动开始上传</p>
          </div>
          <div class="stat-grid">
            <div class="stat">
              <div class="label">今日下载成功</div>
              <div class="value" id="downloadSuccessCount">0</div>
            </div>
            <div class="stat">
              <div class="label">今日上传成功</div>
              <div class="value" id="uploadSuccessCount">0</div>
            </div>
          </div>
        </div>
        <div class="row" style="margin-top:12px; display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
          <button id="autoRunBtn" class="btn primary big">一键执行</button>
          <button id="autoPauseBtn" class="btn ghost">暂停任务</button>
          <span class="muted" id="autoRunStatus"></span>
        </div>
        <div class="row" style="margin-top:8px; display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
          <label style="margin:0;">启用每日自动执行（使用首个发布时段）</label>
          <input type="checkbox" id="autoRunEnabled" style="width:auto; margin:0 8px 0 0;" />
        </div>
        <div class="row" style="margin-top:8px; display:flex; gap:16px; flex-wrap:wrap;">
          <span class="muted" id="downloadProgress">下载进度：-</span>
          <span class="muted" id="uploadProgress">上传进度：-</span>
        </div>
        <div class="row" style="margin-top:8px;">
          <label style="margin-bottom:6px;">上传店铺（默认全选）</label>
          <div id="uploadShopList" class="shop-list"></div>
        </div>
        <details class="collapse" style="margin-top:18px;">
          <summary>手动操作</summary>
          <div class="row" style="margin-top:12px;">
            <div class="row-grid two">
              <div class="panel">
                <div class="section-title">下载操作</div>
                <div class="actions">
                  <button id="downloadBtn" class="btn primary">手动下载</button>
                  <button id="downloadPauseToggle" class="btn ghost">暂停下载</button>
                </div>
                <p class="feedback" id="downloadActionStatus"></p>
              </div>
              <div class="panel">
                <div class="section-title">上传操作</div>
                <div class="actions">
                  <button id="scanBtn" class="btn primary">手动上传（按分段）</button>
                  <button id="scanBtnIgnore" class="btn ghost">手动上传（忽略分段）</button>
                  <button id="uploadPauseToggle" class="btn ghost">暂停上传</button>
                  <button id="refreshStatusBtn" class="btn ghost">刷新状态</button>
                  <button id="resetBtn" class="btn ghost">清空上传记录</button>
                </div>
                <p class="feedback" id="uploadActionStatus"></p>
              </div>
            </div>
          </div>
        </details>
      </div>
    </section>

    <section class="page-block">
      <div class="row-grid two">
        <div class="card">
          <div class="section-title">
            <span>日志与记录</span>
            <button id="clearLogsBtn" class="btn ghost small">清空日志</button>
          </div>
          <div class="panel">
            <div class="section-title">全部日志</div>
            <div class="log-tools">
              <div class="tab-group">
                <button class="tab active" data-log-scope="today">今天</button>
                <button class="tab" data-log-scope="all">全部</button>
              </div>
            </div>
            <div class="log-area" id="logArea"></div>
          </div>
        </div>
        <div class="card">
          <div class="section-title">上传记录</div>
          <div class="table-wrapper">
            <table class="table" id="taskTable">
              <thead>
                <tr>
                  <th>店铺</th>
                  <th>文件</th>
                  <th>状态</th>
                  <th>备注</th>
                  <th>开始</th>
                  <th>结束</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="actions" style="justify-content: space-between; margin-top:12px;">
            <button class="btn ghost small" id="taskPrevBtn">上一页</button>
            <span class="muted" id="taskPageInfo">第 1 / 1 页</span>
            <button class="btn ghost small" id="taskNextBtn">下一页</button>
          </div>
        </div>
      </div>
    </section>

    <section class="page-block">
      <p class="muted note">默认不要动，需要修改联系研发人员。</p>
      <div class="card fixed collapsed" data-card="shops">
        <div class="section-title">店铺配置</div>
        <div class="fixed-body">
          <div class="row">
            <label for="shopList">店铺列表（每行一个，需与视频目录一致）</label>
            <textarea id="shopList" placeholder="拼多多旗舰店"></textarea>
            <p class="muted">先保存店铺列表，后面的授权与产品配置会读取这里的店铺名。</p>
          </div>
          <div class="actions" style="margin-top:10px;">
            <button id="saveShopsBtn" class="btn primary">保存店铺配置</button>
          </div>
        </div>
        <button class="btn ghost small toggle-collapse" data-target="shops">展开</button>
      </div>
    </section>

    <section class="page-block">
      <div class="row-grid three">
        <div class="card fixed collapsed" data-card="auth">
          <div class="section-title">账号授权（Token）</div>
          <div class="fixed-body">
            <label>授权店铺</label>
            <div id="authShopList" class="panel"></div>
            <p class="muted">每个店铺需要单独授权，店铺名需与日期目录一致。</p>
            <label for="clientId">App ID / client_id</label>
            <input id="clientId" placeholder="在拼多多开放平台创建的 client_id" autocomplete="off" />
            <label for="clientSecret">App Secret / client_secret</label>
            <input
              id="clientSecret"
              placeholder="在拼多多开放平台获取的 client_secret"
              autocomplete="off"
              type="password"
            />
            <label for="redirectUri">Redirect URI</label>
            <input id="redirectUri" placeholder="例如：http://localhost:3000/auth/callback" />
            <p class="muted">默认回调：<code id="defaultRedirect"></code></p>
            <span id="stepRedirect" style="display:none;"></span>
            <label for="authBase">授权入口（可留默认）</label>
            <input id="authBase" placeholder="默认：https://mms.pinduoduo.com/open.html" autocomplete="off" />
            <p class="muted">服务市场/多店场景可替换为官方文档中的授权地址。</p>
            <label>
              <input type="checkbox" id="requireAuth" style="width:auto; margin-right:6px;" />
              未授权不上传（推荐开启）
            </label>
            <p id="status" class="muted" style="display:none;"></p>
            <div class="row" id="authArea" style="display: none; margin-top:12px;">
              <p class="tag">授权链接</p>
              <div class="auth-url" id="authUrl"></div>
              <div class="tag" style="margin-top:10px;">Token 概览</div>
              <div class="token-grid">
                <div class="stat">
                  <div class="label">Access Token</div>
                  <div class="value" id="tokenAccess">-</div>
                </div>
                <div class="stat">
                  <div class="label">Refresh Token</div>
                  <div class="value" id="tokenRefresh">-</div>
                </div>
                <div class="stat">
                  <div class="label">Expires</div>
                  <div class="value" id="tokenExpire">-</div>
                </div>
              </div>
            </div>
            <div class="block" style="margin-top:12px;">
              <div class="block-title">手动换取 Token（备用）</div>
              <div class="row">
                <label for="authCode">回调 code</label>
                <input id="authCode" placeholder="从回调 URL 里复制 code=..." />
                <label for="authState">回调 state（可选）</label>
                <input id="authState" placeholder="从回调 URL 里复制 state=..." />
                <p class="muted">请在店铺列表中点“换取 Token”完成绑定。</p>
              </div>
            </div>
          </div>
          <button class="btn ghost small toggle-collapse" data-target="auth">展开</button>
        </div>

        <div class="card fixed collapsed" data-card="baidu">
          <div class="section-title">
            <span>百度网盘登录信息</span>
            <div class="actions" style="gap:6px;">
              <button class="btn ghost small" id="refreshBaiduBtn">刷新状态</button>
              <button class="btn ghost small" id="baiduLogoutBtn">退出登录</button>
            </div>
          </div>
          <div class="fixed-body">
            <div class="status" id="baiduStatus">
              <span class="dot"></span>
              <span>未检查</span>
            </div>
            <p class="muted" id="baiduStatusDetail"></p>
            <p class="feedback" id="baiduActionStatus"></p>
            <pre id="baiduLoginOutput" style="display:none; margin-top:8px;"></pre>
            <label for="baiduBdussInput">BDUSS 登录</label>
            <input id="baiduBdussInput" placeholder="填 BDUSS" />
            <label for="baiduStokenInput" style="margin-top:8px;">STOKEN（可选）</label>
            <input id="baiduStokenInput" placeholder="可选，填 STOKEN" />
            <div class="actions" style="margin-top:8px;">
              <button id="baiduBdussLoginBtn" class="btn secondary">一键 BDUSS 登录（Electron）</button>
            </div>
          </div>
          <button class="btn ghost small toggle-collapse" data-target="baidu">展开</button>
        </div>

        <div class="card fixed collapsed" data-card="misc">
          <div class="section-title">其他配置</div>
          <div class="fixed-body">
            <div class="block">
              <div class="block-title">产品目录配置</div>
              <div class="row">
                <label for="productShopSelect">当前店铺</label>
                <select id="productShopSelect"></select>
                <label for="productGoodsMap">产品目录 -> 商品 ID（每行：产品名=商品ID）</label>
                <textarea
                  id="productGoodsMap"
                  placeholder="染发剂子母管=861017472489&#10;洗发水绿色款=861017472490"
                ></textarea>
                <label for="productTitleTags">产品目录 -> 标签（每行：产品名=标签1,标签2）</label>
                <textarea
                  id="productTitleTags"
                  placeholder="染发剂子母管=好物推荐,爆款好物&#10;洗发水绿色款=控油洗发,清爽蓬松"
                ></textarea>
                <label for="hotTitleTags">热点标签（随机选 2 个）</label>
                <textarea
                  id="hotTitleTags"
                  placeholder="美妆好物大盘点&#10;省到家的护发好物清单&#10;头皮护理好物推荐&#10;干枯毛躁护发好物"
                ></textarea>
                <p class="muted">发布时会自动追加空格+标签（#），并从热点与产品标签各随机选 2 个。</p>
                <label for="publishTimeSlots">发布时段（每天，按行填写 HH:mm）</label>
                <textarea
                  id="publishTimeSlots"
                  placeholder="06:00&#10;13:00&#10;20:00"
                ></textarea>
                <label for="publishRatio">发布比例（与时段一一对应）</label>
                <input id="publishRatio" placeholder="3,5,2" />
<label for="goodsId">默认商品 ID</label>
                <input id="goodsId" placeholder="861017472489" />
                <p class="muted">视频在对应产品目录下时，优先使用这里的商品 ID。</p>
                <label for="videoDesc">视频标题/描述（可选）</label>
                <input id="videoDesc" placeholder="可填写标题或话题" autocomplete="off" />
                <div class="actions" style="margin-top:10px;">
                  <button id="saveBtn" class="btn" style="display:none;"></button>
                </div>
              </div>
            </div>
            <div class="block" style="margin-top:12px;">
              <div class="block-title">下载配置</div>
              <div class="row">
                <label for="feishuWebhook">飞书群 Webhook（可选）</label>
                <input id="feishuWebhook" placeholder="https://open.feishu.cn/..." />
                <div class="actions" style="margin-top:8px;">
                  <button id="feishuTestBtn" class="btn ghost">发送测试消息</button>
                </div>
                <label for="downloadRemoteRoot">百度网盘远端根目录</label>
                <input id="downloadRemoteRoot" placeholder="/apps/你的应用或根目录" />
                <p class="muted">系统会自动在该目录下查找 <code>video</code> 子目录。</p>
                <label for="downloadLocalRoot">本地下载保存目录（如 D:\pdd_videos）</label>
                <input id="downloadLocalRoot" placeholder="例如 D:\\pdd_videos" />
                <label for="baiduCliPath">BaiduPCS-Go 路径（可选）</label>
                <input id="baiduCliPath" placeholder="BaiduPCS-Go.exe（放在项目根目录即可）" />
                <div class="actions" style="margin-top:10px;"></div>
              </div>
            </div>
            <div class="block" style="margin-top:12px;">
              <div class="block-title">转写与标题</div>
              <div class="row">
                <label>
                  <input type="checkbox" id="asrEnabled" style="width:auto; margin-right:6px;" />
                  启用自动转写（阿里云 DashScope）
                </label>
                <label for="dashscopeApiKey">DashScope API Key</label>
                <input id="dashscopeApiKey" placeholder="填阿里云 DashScope API Key" autocomplete="off" type="password" />
                <label for="dashscopeAsrModel">ASR 模型</label>
                <input id="dashscopeAsrModel" placeholder="qwen3-asr-flash" />
                <label for="asrMaxSeconds">转写时长（秒）</label>
                <input id="asrMaxSeconds" placeholder="60" />
                <label for="asrContext">热词/上下文</label>
                <textarea
                  id="asrContext"
                  placeholder="可填写品牌、人名、地名等，按行或逗号分隔"
                ></textarea>
                <label for="titleModel">标题模型（文本）</label>
                <input id="titleModel" placeholder="qwen-turbo" />
                <label for="titlePrompt">标题提示词</label>
                <textarea
                  id="titlePrompt"
                  placeholder="请将下面口播文案总结成一个完整的中文标题句子，长度控制在{min_len}-{max_len}字以内。"
                ></textarea>
                <p class="muted">支持变量：{transcript} {product_name} {min_len} {max_len}</p>
                <div class="row" style="display:flex; gap:10px;">
                  <div style="flex:1;">
                    <label for="titleMinLen">标题最小字数</label>
                    <input id="titleMinLen" placeholder="10" />
                  </div>
                  <div style="flex:1;">
                    <label for="titleMaxLen">标题最大字数</label>
                    <input id="titleMaxLen" placeholder="20" />
                  </div>
                </div>
                <p class="muted">自动标题会优先写入上传描述，并在上传记录备注中展示。</p>
                <div class="actions" style="margin-top:10px;"></div>
              </div>
            </div>
            <div class="block" style="margin-top:12px;">
              <div class="block-title">高级上传配置（隐藏）</div>
              <div class="row">
                <label for="downloadTime">每日开始下载时间（北京）</label>
                <input id="downloadTime" placeholder="00:05" />
                <label>
                  <input type="checkbox" id="downloadEnabled" style="width:auto; margin-right:6px;" />
                  启用定点自动下载
                </label>
                <div style="display:none;">
                  <label for="startTime">每日开始时间(北京)</label>
                  <input id="startTime" placeholder="09:00" />
                </div>
                <label for="interval">上传间隔（秒）</label>
                <input id="interval" placeholder="300" />
                <label for="dailyLimit">每日上限（条）</label>
                <input id="dailyLimit" placeholder="50" />
                <label for="videoRoot">上传扫描目录（视频根目录，例如 D:\pdd_videos）</label>
                <input id="videoRoot" placeholder="例如 D:\\pdd_videos" />
                <div class="actions" style="margin-top:10px;"></div>
                <div class="row" style="margin-top:12px;">
                  <div class="section-title">
                    <span>环境检查</span>
                    <button class="btn ghost small" id="ffmpegCheckBtn">检查ffmpeg</button>
                  </div>
                  <div class="status" id="ffmpegStatus">
                    <span class="dot"></span>
                    <span>ffmpeg: 未检查</span>
                  </div>
                  <p class="muted" id="ffmpegPath"></p>
                </div>
              </div>
            </div>
          </div>
          <button class="btn ghost small toggle-collapse" data-target="misc">展开</button>
        </div>
      </div>
    </section>

    <section class="page-block">
      <div class="card">
        <div class="actions" style="justify-content:flex-end;">
          <button id="saveAllConfigBtn" class="btn primary big">保存全部配置</button>
        </div>
      </div>
    </section>

<script src="app.js"></script>
  </body>
</html>
